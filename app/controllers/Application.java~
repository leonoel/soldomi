package controllers;

import play.*;
import play.mvc.*;

import java.util.*;

import models.*;
import java.io.*;

import nwcfile.*;

public class Application extends Controller {

  public static void index() {
    List<Tune> tunes = Tune.find("order by lastModifAt desc").from(0).fetch(10);
    render(tunes);
  }

  public static void uploadNwc(File nwc) {
    try {
      NwcFileReader reader = new NwcFileReader(new FileInputStream(nwc));
      NwcFile nwcfile = new NwcFile().unmarshall(reader);
      new Tune(nwcfile).save();
    } catch (NwcFileException e) {
      render();
    } catch (FileNotFoundException e) {
      render();
    }
  }

}